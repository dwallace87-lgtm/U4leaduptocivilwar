<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Documenting Slavery: Student Analysis Tool</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/lucide.min.js"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:ital,wght@0,400;0,600;0,700;1,400&family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">

    <style>
        /* Base Settings */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f5f5f4; /* Stone-100 */
            background-image: radial-gradient(#e7e5e4 1px, transparent 1px);
            background-size: 24px 24px;
            color: #1c1917;
        }

        /* The Historical Document Font */
        .source-text {
            font-family: 'Crimson Pro', serif;
            line-height: 1.9;
            font-size: 1.25rem;
        }

        /* Paper Effect for the Document */
        .paper-shadow {
            box-shadow: 
                0 1px 1px rgba(0,0,0,0.15), 
                0 10px 0 -5px #eee, 
                0 10px 1px -4px rgba(0,0,0,0.15), 
                0 20px 0 -10px #eee, 
                0 20px 1px -9px rgba(0,0,0,0.15);
        }
        
        /* Interactive Terms */
        .glossary-term {
            cursor: help;
            border-bottom: 2px dotted #57534e;
            transition: all 0.2s ease;
        }
        .glossary-term:hover {
            background-color: #292524;
            color: #fafaf9;
            border-radius: 4px;
            padding: 0 4px;
            margin: 0 -4px;
            text-decoration: none;
            border-bottom: none;
        }

        /* Marker/Highlighter Effects */
        .highlight-base {
            padding: 2px 4px;
            border-radius: 4px;
            box-decoration-break: clone;
            -webkit-box-decoration-break: clone;
        }

        .highlight-legal {
            background-color: rgba(252, 211, 77, 0.4); /* Amber */
            color: #78350f;
        }
        .highlight-geo {
            background-color: rgba(110, 231, 183, 0.4); /* Emerald */
            color: #064e3b;
        }
        .highlight-econ {
            background-color: rgba(147, 197, 253, 0.4); /* Blue */
            color: #1e3a8a;
        }

        /* Lined Paper Effect for Notepad */
        .lined-paper {
            background-color: #fef9c3;
            background-image: linear-gradient(#facc15 1px, transparent 1px);
            background-size: 100% 2rem;
            line-height: 2rem;
            padding-top: 0.5rem;
        }

        /* Animations */
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px) scale(0.98); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
        .definition-active {
            display: block !important;
            animation: slideIn 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <header class="bg-slate-900 text-white sticky top-0 z-50 backdrop-blur-md bg-opacity-95 border-b border-slate-700 shadow-xl">
        <div class="max-w-7xl mx-auto px-6 py-4 flex flex-col md:flex-row justify-between items-center">
            <div class="flex items-center gap-4">
                <div class="bg-amber-500 p-2 rounded-lg text-slate-900">
                    <i data-lucide="feather" class="w-6 h-6"></i>
                </div>
                <div>
                    <h1 class="text-2xl font-extrabold tracking-tight text-stone-100">Documenting Slavery</h1>
                    <p class="text-slate-400 text-sm font-medium uppercase tracking-widest">Primary Source Analysis</p>
                </div>
            </div>
            
            <div class="mt-4 md:mt-0 flex gap-2 bg-slate-800 p-2 rounded-lg border border-slate-700">
                <div class="flex items-center gap-2 text-xs px-3 py-1 rounded bg-slate-900/50 border border-amber-900/50">
                    <span class="w-3 h-3 rounded-full bg-amber-400"></span> Legal
                </div>
                <div class="flex items-center gap-2 text-xs px-3 py-1 rounded bg-slate-900/50 border border-emerald-900/50">
                    <span class="w-3 h-3 rounded-full bg-emerald-400"></span> Geo/Crops
                </div>
                <div class="flex items-center gap-2 text-xs px-3 py-1 rounded bg-slate-900/50 border border-blue-900/50">
                    <span class="w-3 h-3 rounded-full bg-blue-400"></span> Economics
                </div>
            </div>
        </div>
    </header>

    <main class="flex-grow p-4 md:p-8 max-w-7xl mx-auto w-full grid grid-cols-1 lg:grid-cols-12 gap-8">

        <div class="lg:col-span-8 space-y-8">
            
            <div class="bg-white rounded-xl shadow-sm border border-stone-200 p-6 flex gap-4 items-start">
                <div class="bg-indigo-100 p-3 rounded-full text-indigo-600 shrink-0 hidden md:block">
                    <i data-lucide="glasses" class="w-6 h-6"></i>
                </div>
                <div>
                    <h2 class="text-lg font-bold text-slate-800 mb-2 uppercase tracking-wide">Instructions</h2>
                    <ol class="list-decimal list-inside space-y-1 text-slate-600 font-medium">
                        <li><span class="text-indigo-600 font-bold">Preview</span> the writing task in the sidebar.</li>
                        <li><span class="text-indigo-600 font-bold">Read</span> Document A carefully. Click dotted words for definitions.</li>
                        <li><span class="text-indigo-600 font-bold">Take notes</span> on the shift from tobacco to cotton.</li>
                    </ol>
                </div>
            </div>

            <div class="relative">
                <div class="absolute -top-3 -left-2 z-10">
                    <span class="bg-slate-800 text-white text-sm font-bold px-4 py-1 rounded shadow-lg transform -rotate-2 inline-block border border-slate-600">
                        Document A
                    </span>
                </div>

                <div class="bg-white rounded-sm p-8 md:p-12 paper-shadow border border-stone-200 relative overflow-hidden">
                    
                    <div class="absolute top-0 right-0 p-4 opacity-10 pointer-events-none">
                        <i data-lucide="file-text" class="w-32 h-32 text-slate-900"></i>
                    </div>

                    <div class="border-b-2 border-stone-800 pb-6 mb-8 text-center">
                        <h3 class="font-serif font-bold text-3xl text-stone-900 mb-2">Statistics of Slaves</h3>
                        <p class="text-stone-500 italic font-serif text-lg">Published 1909 &mdash; U.S. Census Bureau</p>
                    </div>

                    <div class="source-text text-stone-800 space-y-8">
                        
                        <div class="relative pl-6 border-l-4 border-transparent hover:border-stone-200 transition-colors duration-300">
                            <span class="absolute left-0 top-1 text-xs text-stone-300 font-sans select-none">01</span>
                            <p>
                                ...The higher percentage shown for the decade 1800 to 1810 reflects the 
                                <span class="glossary-term highlight-base highlight-legal font-bold" onclick="showDef('importation', 'The act of bringing goods or people into a country from abroad.')">large importation of negroes</span> 
                                during the years immediately preceding 
                                <span class="highlight-base highlight-legal font-bold">January 1, 1808</span>, 
                                after which date the 
                                <span class="glossary-term highlight-base highlight-legal" onclick="showDef('prohibited', 'Forbidden by law; banned completely.')">international trade in slaves was prohibited</span> 
                                in the United States...
                            </p>
                            <p class="mt-4">
                                ...the growth in the number of slaves hereafter can be attributed to the 
                                <span class="glossary-term highlight-base highlight-econ font-bold" onclick="showDef('domestic slave trade', 'The internal buying and selling of enslaved people within US borders (e.g., Virginia to Alabama).')">domestic slave trade</span> 
                                and rapid forced population increase amongst the slaves.
                            </p>
                        </div>

                        <div class="flex items-center justify-center gap-4 opacity-50">
                            <div class="h-px bg-stone-300 w-12"></div>
                            <span class="text-stone-400 font-serif italic">* * *</span>
                            <div class="h-px bg-stone-300 w-12"></div>
                        </div>

                        <div class="relative pl-6 border-l-4 border-transparent hover:border-stone-200 transition-colors duration-300">
                            <span class="absolute left-0 top-1 text-xs text-stone-300 font-sans select-none">15</span>
                            <p>
                                ...<span class="highlight-base highlight-geo font-bold">Delaware, Maryland and Virginia</span> were principally in the cultivation of 
                                <span class="highlight-base highlight-geo font-bold">tobacco</span> in early years. The 
                                <span class="glossary-term highlight-base highlight-geo" onclick="showDef('soil impoverished', 'The soil lost all nutrients because the same crop was grown repeatedly without rest.')">soil was rapidly impoverished</span> 
                                by this crop, and as a result the center of tobacco culture tended to move farther 
                                <span class="highlight-base highlight-geo">westward</span>...
                            </p>
                        </div>

                        <div class="relative pl-6 border-l-4 border-transparent hover:border-stone-200 transition-colors duration-300">
                            <span class="absolute left-0 top-1 text-xs text-stone-300 font-sans select-none">22</span>
                            <p>
                                As the cultivation of tobacco became 
                                <span class="highlight-base highlight-econ italic">somewhat less profitable</span>, the 
                                <span class="glossary-term highlight-base highlight-geo font-bold" onclick="showDef('acquisition', 'The act of gaining possession of new land (e.g., Louisiana Purchase).')">acquisition of new territory</span> 
                                in the far South (<span class="highlight-base highlight-geo">Georgia, Mississippi, Louisiana</span>) and the expansion of 
                                <span class="highlight-base highlight-geo font-bold border-b-2 border-emerald-500">cotton growing</span> 
                                made slave labor 
                                <span class="highlight-base highlight-econ font-bold">highly profitable</span>.
                            </p>
                            <p class="mt-4">
                                After 1808, the 
                                <span class="glossary-term highlight-base highlight-econ" onclick="showDef('market price', 'The monetary cost to purchase an enslaved person.')">market price of negroes advanced rapidly</span>, 
                                because of the 
                                <span class="highlight-base highlight-econ font-bold">increasing demand</span> for their services in the cotton fields...
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="lg:col-span-4 space-y-6">

            <div class="sticky top-24 space-y-6">
                
                <div id="definition-box" class="hidden bg-slate-800 text-white p-5 rounded-xl shadow-2xl border-l-4 border-amber-400 relative overflow-hidden group">
                    <div class="absolute -right-6 -top-6 w-24 h-24 bg-slate-700 rounded-full opacity-50 group-hover:scale-110 transition-transform"></div>
                    
                    <div class="relative z-10">
                        <div class="flex justify-between items-start mb-2">
                            <h4 class="font-bold uppercase text-xs tracking-wider text-amber-400">Vocabulary</h4>
                            <button onclick="hideDef()" class="text-slate-400 hover:text-white"><i data-lucide="x" class="w-4 h-4"></i></button>
                        </div>
                        <h5 id="def-term" class="text-2xl font-serif font-bold mb-2 text-white">Term</h5>
                        <p id="def-text" class="text-slate-300 leading-relaxed text-sm">Definition goes here.</p>
                    </div>
                </div>

                <div class="bg-white p-5 rounded-xl shadow-sm border border-stone-200">
                    <div class="flex items-center gap-2 mb-4 border-b border-stone-100 pb-2">
                        <div class="p-1 bg-emerald-100 text-emerald-600 rounded">
                            <i data-lucide="check-circle-2" class="w-5 h-5"></i>
                        </div>
                        <h3 class="font-bold text-stone-800">Quick Check</h3>
                    </div>
                    
                    <p class="text-stone-600 text-sm font-medium mb-3">What caused the shift from tobacco to cotton?</p>
                    
                    <div class="space-y-2">
                        <button onclick="checkAnswer(this, false)" class="w-full text-left px-3 py-2 rounded border border-stone-200 hover:bg-stone-50 text-sm transition-all flex justify-between items-center group">
                            <span>A. War with Britain</span>
                            <i data-lucide="circle" class="w-4 h-4 text-stone-300 group-hover:text-stone-400"></i>
                        </button>
                        <button onclick="checkAnswer(this, true)" class="w-full text-left px-3 py-2 rounded border border-stone-200 hover:bg-stone-50 text-sm transition-all flex justify-between items-center group">
                            <span>B. Soil Depletion</span>
                            <i data-lucide="circle" class="w-4 h-4 text-stone-300 group-hover:text-stone-400"></i>
                        </button>
                        <button onclick="checkAnswer(this, false)" class="w-full text-left px-3 py-2 rounded border border-stone-200 hover:bg-stone-50 text-sm transition-all flex justify-between items-center group">
                            <span>C. New Laws</span>
                            <i data-lucide="circle" class="w-4 h-4 text-stone-300 group-hover:text-stone-400"></i>
                        </button>
                    </div>
                    <div id="feedback-area" class="mt-3 text-xs font-bold h-4"></div>
                </div>

                <div class="bg-yellow-50 rounded-xl shadow-md border border-yellow-200 relative overflow-hidden">
                    <div class="h-4 bg-stone-800 w-full opacity-10"></div>
                    <div class="absolute top-0 left-0 w-full h-4 flex justify-evenly z-10">
                         <div class="w-2 h-4 bg-stone-800 rounded-b-full opacity-80"></div>
                        <div class="w-2 h-4 bg-stone-800 rounded-b-full opacity-80"></div>
                        <div class="w-2 h-4 bg-stone-800 rounded-b-full opacity-80"></div>
                        <div class="w-2 h-4 bg-stone-800 rounded-b-full opacity-80"></div>
                        <div class="w-2 h-4 bg-stone-800 rounded-b-full opacity-80"></div>
                        <div class="w-2 h-4 bg-stone-800 rounded-b-full opacity-80"></div>
                    </div>

                    <div class="p-5 pt-6">
                        <div class="flex justify-between items-center mb-2">
                            <h3 class="font-handwriting text-yellow-900 font-bold">Student Notes</h3>
                            <span id="save-status" class="text-xs text-yellow-600 font-mono">Autosave on</span>
                        </div>
                        <textarea id="student-notes" class="w-full h-64 lined-paper bg-transparent border-none focus:ring-0 text-slate-700 text-lg resize-none font-serif" placeholder="Start typing here..."></textarea>
                        
                        <div class="mt-2 pt-2 border-t border-yellow-200 flex justify-end">
                            <button onclick="clearNotes()" class="text-xs text-red-500 hover:text-red-700 font-medium hover:underline">Clear Page</button>
                        </div>
                    </div>
                </div>

            </div>
        </div>

    </main>

    <footer class="bg-stone-200 text-stone-500 text-center py-6 mt-12 text-sm">
        <p>Interactive History Lab &copy; 2023</p>
    </footer>

    <script>
        // Initialize Icons
        lucide.createIcons();

        // 1. Definition Box Logic
        function showDef(term, definition) {
            const box = document.getElementById('definition-box');
            const termEl = document.getElementById('def-term');
            const textEl = document.getElementById('def-text');
            
            termEl.textContent = term;
            textEl.textContent = definition;
            
            // Reset animation
            box.classList.remove('definition-active');
            void box.offsetWidth; // trigger reflow
            box.classList.add('definition-active');
        }

        function hideDef() {
            const box = document.getElementById('definition-box');
            box.classList.remove('definition-active');
            box.classList.add('hidden');
        }

        // 2. Quick Check Logic
        function checkAnswer(btn, isCorrect) {
            const allBtns = btn.parentElement.querySelectorAll('button');
            const feedback = document.getElementById('feedback-area');
            
            // Reset all buttons
            allBtns.forEach(b => {
                b.className = "w-full text-left px-3 py-2 rounded border border-stone-200 hover:bg-stone-50 text-sm transition-all flex justify-between items-center group";
                const icon = b.querySelector('svg');
                if(icon) icon.outerHTML = '<i data-lucide="circle" class="w-4 h-4 text-stone-300 group-hover:text-stone-400"></i>';
            });
            lucide.createIcons(); // Re-render icons

            if (isCorrect) {
                btn.classList.remove('border-stone-200', 'hover:bg-stone-50');
                btn.classList.add('bg-emerald-50', 'border-emerald-500', 'text-emerald-800');
                
                // Change Icon
                const icon = btn.querySelector('.lucide-circle');
                if(icon) {
                    const check = document.createElement('i');
                    check.setAttribute('data-lucide', 'check');
                    check.className = "w-4 h-4 text-emerald-600";
                    icon.replaceWith(check);
                    lucide.createIcons();
                }

                feedback.textContent = "Correct! Tobacco ruined the soil.";
                feedback.className = "mt-3 text-xs font-bold h-4 text-emerald-600";
            } else {
                btn.classList.remove('border-stone-200', 'hover:bg-stone-50');
                btn.classList.add('bg-red-50', 'border-red-300', 'text-red-800');
                
                // Change Icon
                const icon = btn.querySelector('.lucide-circle');
                if(icon) {
                    const x = document.createElement('i');
                    x.setAttribute('data-lucide', 'x');
                    x.className = "w-4 h-4 text-red-500";
                    icon.replaceWith(x);
                    lucide.createIcons();
                }

                feedback.textContent = "Try again. Look for 'soil was rapidly impoverished'.";
                feedback.className = "mt-3 text-xs font-bold h-4 text-red-500";
            }
        }

        // 3. Note Saving Logic
        const noteArea = document.getElementById('student-notes');
        const statusArea = document.getElementById('save-status');

        window.onload = function() {
            const savedNotes = localStorage.getItem('slaveryDocNotes');
            if (savedNotes) {
                noteArea.value = savedNotes;
            }
        };

        noteArea.addEventListener('input', function() {
            localStorage.setItem('slaveryDocNotes', this.value);
            statusArea.textContent = "Saving...";
            statusArea.className = "text-xs text-amber-600 font-mono animate-pulse";
            
            // Debounce the "Saved" message
            clearTimeout(window.saveTimeout);
            window.saveTimeout = setTimeout(() => {
                statusArea.textContent = "Saved âœ“";
                statusArea.className = "text-xs text-green-600 font-mono";
            }, 800);
        });

        function clearNotes() {
            if(confirm("Are you sure you want to clear your notes?")) {
                localStorage.removeItem('slaveryDocNotes');
                noteArea.value = "";
                statusArea.textContent = "Notes cleared";
                statusArea.className = "text-xs text-slate-400 font-mono";
            }
        }
    </script>
</body>
</html>
